<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction Receipt</title>
</head>
<body>
    <div class="watermark">
        {% if transaction.status.name == 'COMPLETED' %}
        COMPLETED
        {% elif transaction.status.name == 'REJECTED' %}
        REJECTED
        {% elif transaction.status.name == 'CANCELLED' %}
        CANCELLED
        {% endif %}
    </div>

    <div class="header">
        <div class="title">Transaction Receipt</div>
        <div class="subtitle">NVC Private Banking</div>
        <div class="subtitle">Reference: {{ transaction.transaction_id }}</div>
    </div>

    <div class="section">
        <div class="section-title">Transaction Information</div>
        <table>
            <tr>
                <th>Transaction ID:</th>
                <td>{{ transaction.transaction_id }}</td>
            </tr>
            <tr>
                <th>Reference Number:</th>
                <td>{{ transaction.reference_number }}</td>
            </tr>
            <tr>
                <th>Type:</th>
                <td>{{ transaction.transaction_type.value|replace('_', ' ')|title }}</td>
            </tr>
            <tr>
                <th>Status:</th>
                <td>
                    <span class="badge {{ status_class }}">
                        {{ transaction.status.name|title }}
                    </span>
                </td>
            </tr>
            <tr>
                <th>Amount:</th>
                <td>{{ transaction.currency }} {{ "%.2f"|format(transaction.amount) }}</td>
            </tr>
            <tr>
                <th>Created Date:</th>
                <td>{{ formatted_date }}</td>
            </tr>
            {% if completed_date %}
            <tr>
                <th>Completed Date:</th>
                <td>{{ completed_date }}</td>
            </tr>
            {% endif %}
            <tr>
                <th>Created By:</th>
                <td>
                    {% if transaction.created_by_user %}
                        {{ transaction.created_by_user.username }}
                    {% else %}
                        System
                    {% endif %}
                </td>
            </tr>
        </table>
    </div>

    <div class="section">
        <div class="section-title">Account Information</div>
        <table>
            <tr>
                <th>From Account:</th>
                <td>
                    {% if transaction.from_account %}
                        {{ transaction.from_account.name }}
                    {% else %}
                        External Account
                    {% endif %}
                </td>
            </tr>
            <tr>
                <th>To Account:</th>
                <td>
                    {% if transaction.to_account %}
                        {{ transaction.to_account.name }}
                    {% else %}
                        External Account
                    {% endif %}
                </td>
            </tr>
        </table>
    </div>

    {% if transaction.description or transaction.memo %}
    <div class="section">
        <div class="section-title">Additional Information</div>
        <table>
            {% if transaction.description %}
            <tr>
                <th>Description:</th>
                <td>{{ transaction.description }}</td>
            </tr>
            {% endif %}
            {% if transaction.memo %}
            <tr>
                <th>Memo:</th>
                <td>{{ transaction.memo }}</td>
            </tr>
            {% endif %}
        </table>
    </div>
    {% endif %}

    <div class="footer">
        <p>This receipt was generated on {{ generation_date }}</p>
        <p>NVC Private Banking | Treasury Department</p>
    </div>
</body>
</html>