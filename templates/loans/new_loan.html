{% extends "base.html" %}

{% block title %}New Loan Application - NVC Banking Platform{% endblock %}

{% block head %}
<style>
    /* Improve dropdown visibility - force light mode for all dropdowns */
    .form-select {
        color: #000 !important;
        background-color: #fff !important;
        border-color: #0d6efd !important;
    }
    
    /* Make dropdown options always visible */
    .form-select option, 
    .form-select optgroup {
        color: #000 !important;
        background-color: #fff !important;
        padding: 8px !important;
    }
    
    /* Make group headers stand out clearly */
    .form-select optgroup {
        font-weight: bold !important;
        color: #0d6efd !important;
        background-color: #e9f2ff !important;
        border-bottom: 1px solid #ccc !important;
    }
    
    /* Improve dropdown option hover state */
    .form-select option:hover,
    .form-select option:focus,
    .form-select option:active {
        background-color: #0d6efd !important;
        color: #fff !important;
    }
    
    /* Improve dropdown active state */
    .form-select:focus {
        border-color: #0d6efd !important;
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25) !important;
    }
    
    /* Add space between options for better readability */
    .form-select option {
        margin: 2px 0 !important;
        border-radius: 4px !important;
    }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1 class="h3 mb-0 text-primary">New Loan Application</h1>
                <a href="{{ url_for('simple_loan.index') }}" class="btn btn-outline-primary">
                    <i class="fas fa-arrow-left me-1"></i> Back to Loans
                </a>
            </div>
            
            <div class="card shadow-lg border-primary">
                <div class="card-header bg-primary-subtle">
                    <h5 class="mb-0 text-primary">Loan Application Form</h5>
                </div>
                <div class="card-body">
                    <form method="POST" action="{{ url_for('simple_loan.new_loan') }}">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="borrower_name" class="form-label">Borrower Name</label>
                                <input type="text" class="form-control" id="borrower_name" name="borrower_name" required>
                                <div class="form-text">Enter the full legal name of the borrowing entity</div>
                            </div>
                            
                            <div class="col-md-3 mb-3">
                                <label for="loan_amount" class="form-label">Loan Amount</label>
                                <input type="number" class="form-control" id="loan_amount" name="loan_amount" min="10000000" step="1000000" required>
                                <div class="form-text">Minimum $10M, enter amount in whole numbers</div>
                            </div>
                            
                            <div class="col-md-3 mb-3">
                                <label for="currency" class="form-label">Currency</label>
                                <select class="form-select" id="currency" name="currency" required>
                                    <optgroup label="Major Currencies">
                                        <option value="USD" selected>USD - US Dollar</option>
                                        <option value="EUR">EUR - Euro</option>
                                        <option value="GBP">GBP - British Pound</option>
                                        <option value="JPY">JPY - Japanese Yen</option>
                                        <option value="CHF">CHF - Swiss Franc</option>
                                        <option value="CAD">CAD - Canadian Dollar</option>
                                        <option value="AUD">AUD - Australian Dollar</option>
                                    </optgroup>
                                    <optgroup label="Asian Currencies">
                                        <option value="CNY">CNY - Chinese Yuan</option>
                                        <option value="HKD">HKD - Hong Kong Dollar</option>
                                        <option value="SGD">SGD - Singapore Dollar</option>
                                        <option value="INR">INR - Indian Rupee</option>
                                    </optgroup>
                                    <optgroup label="Middle Eastern Currencies">
                                        <option value="AED">AED - UAE Dirham</option>
                                        <option value="SAR">SAR - Saudi Riyal</option>
                                    </optgroup>
                                    <optgroup label="African Currencies">
                                        <option value="ZAR">ZAR - South African Rand</option>
                                        <option value="NGN">NGN - Nigerian Naira</option>
                                        <option value="KES">KES - Kenyan Shilling</option>
                                        <option value="EGP">EGP - Egyptian Pound</option>
                                    </optgroup>
                                    <optgroup label="Platform Currencies">
                                        <option value="NVCT">NVCT - NVC Token</option>
                                        <option value="AFD1">AFD1 - American Federation Dollar</option>
                                        <option value="SFN">SFN - SFN Coin</option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="loan_term" class="form-label">Loan Term (Months)</label>
                                <select class="form-select" id="loan_term" name="loan_term" required>
                                    <optgroup label="Short Term">
                                        <option value="3">3 months (Quarter)</option>
                                        <option value="6">6 months (Half Year)</option>
                                        <option value="12">12 months (1 year)</option>
                                    </optgroup>
                                    <optgroup label="Medium Term">
                                        <option value="18">18 months (1.5 years)</option>
                                        <option value="24">24 months (2 years)</option>
                                        <option value="36">36 months (3 years)</option>
                                        <option value="48">48 months (4 years)</option>
                                        <option value="60" selected>60 months (5 years)</option>
                                    </optgroup>
                                    <optgroup label="Long Term">
                                        <option value="72">72 months (6 years)</option>
                                        <option value="84">84 months (7 years)</option>
                                        <option value="96">96 months (8 years)</option>
                                        <option value="108">108 months (9 years)</option>
                                        <option value="120">120 months (10 years)</option>
                                        <option value="180">180 months (15 years)</option>
                                        <option value="240">240 months (20 years)</option>
                                        <option value="300">300 months (25 years)</option>
                                        <option value="360">360 months (30 years)</option>
                                    </optgroup>
                                </select>
                            </div>
                            
                            <div class="col-md-4 mb-3">
                                <label for="interest_rate" class="form-label">Interest Rate (%)</label>
                                <input type="number" class="form-control" id="interest_rate" name="interest_rate" min="0.1" max="12" step="0.1" value="5.5" required>
                                <div class="form-text">Annual interest rate percentage</div>
                            </div>
                            
                            <div class="col-md-4 mb-3">
                                <label for="purpose" class="form-label">Loan Purpose</label>
                                <select class="form-select" id="purpose" name="purpose" required>
                                    <optgroup label="Capital Enhancement">
                                        <option value="Capital Injection" selected>Capital Injection</option>
                                        <option value="Tier 1 Capital">Tier 1 Capital Enhancement</option>
                                        <option value="Tier 2 Capital">Tier 2 Capital Enhancement</option>
                                        <option value="Regulatory Buffer">Regulatory Buffer Capital</option>
                                        <option value="Recapitalization">General Recapitalization</option>
                                        <option value="Basel Compliance">Basel III/IV Compliance</option>
                                        <option value="Liquidity Ratio">Liquidity Ratio Improvement</option>
                                        <option value="CAR Compliance">Capital Adequacy Ratio Compliance</option>
                                    </optgroup>
                                    <optgroup label="Growth & Expansion">
                                        <option value="Branch Expansion">Branch Network Expansion</option>
                                        <option value="Digital Transformation">Digital Banking Transformation</option>
                                        <option value="Market Expansion">New Market Entry</option>
                                        <option value="Service Expansion">New Service Development</option>
                                        <option value="Geographic Expansion">Geographic Expansion</option>
                                        <option value="Cross-Border Expansion">Cross-Border Banking</option>
                                    </optgroup>
                                    <optgroup label="Strategic Initiatives">
                                        <option value="Acquisition">Financial Institution Acquisition</option>
                                        <option value="Merger">Merger Financing</option>
                                        <option value="Technology Upgrade">Core Banking System Upgrade</option>
                                        <option value="Fintech Integration">Fintech Integration/Acquisition</option>
                                        <option value="Cybersecurity">Cybersecurity Enhancement</option>
                                        <option value="AI Implementation">AI & ML Implementation</option>
                                    </optgroup>
                                    <optgroup label="Debt & Restructuring">
                                        <option value="Debt Refinancing">Debt Refinancing</option>
                                        <option value="Bond Issuance Support">Bond Issuance Support</option>
                                        <option value="Debt Restructuring">Debt Restructuring</option>
                                        <option value="Non-Performing Loans">NPL Resolution</option>
                                        <option value="Asset Quality">Asset Quality Improvement</option>
                                    </optgroup>
                                    <optgroup label="Infrastructure & Operations">
                                        <option value="Infrastructure">Physical Infrastructure</option>
                                        <option value="Working Capital">Working Capital</option>
                                        <option value="Operational Efficiency">Operational Efficiency</option>
                                        <option value="Sustainable Banking">Green Banking Initiative</option>
                                        <option value="Regulatory Compliance">Regulatory Compliance Systems</option>
                                    </optgroup>
                                    <optgroup label="Other">
                                        <option value="MSME Lending">MSME Lending Program</option>
                                        <option value="Specialized Lending">Specialized Lending Initiative</option>
                                        <option value="Other">Other Purpose</option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                        
                        <h5 class="mt-4 mb-3 text-primary">Self-Liquidating Mechanism</h5>
                        <div class="row">
                            <div class="col-md-12 mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="1" id="self_liquidating" name="self_liquidating" checked>
                                    <label class="form-check-label" for="self_liquidating">
                                        Enable Self-Liquidating Structure
                                    </label>
                                    <div class="form-text">The loan will be structured with a self-liquidating mechanism that secures repayment through designated assets or cash flows</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
                            <button type="reset" class="btn btn-outline-secondary me-md-2">
                                <i class="fas fa-undo me-1"></i> Reset
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-paper-plane me-1"></i> Submit Application
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}